const main=document.querySelector("#main"),intro=document.querySelector("#intro"),examUi=document.querySelector("#exam-ui"),resultUi=document.querySelector("#result-ui"),questionNav=document.querySelector("#question-nav"),startButton=document.querySelector("#start-exam"),confirmButton=document.querySelector("#confirm-button"),prevButton=document.querySelector("#prev"),nextButton=document.querySelector("#next"),saveAndNextButton=document.querySelector("#save-next-button"),saveButton=document.querySelector("#save-button"),endButton=document.querySelector("#end-button"),endButtonMobile=document.querySelector("#end-button-mobile"),retryButton=document.querySelector("#retry"),elem=document.documentElement;var userName,answers,timer,elapsedTime,correctAnswers=0,examType=1,currentQuestionIndex=0,questions=[],answeredQuestions=0,selectedAnswers=[];function loadExam(e,t){var n=new XMLHttpRequest;n.overrideMimeType("application/json"),n.open("GET","json/week_"+t+".json",!0),n.onreadystatechange=function(){4==n.readyState&&"200"==n.status&&e(n.responseText)},n.send(null)}function loadQuestions(e){document.getElementById("loader").classList.remove("flex"),document.getElementById("loader").classList.add("hidden"),questions=JSON.parse(e),answers=Array(questions.length),loadQuestionNav(),correctAnswers=0,document.getElementById("question-count-display").innerHTML=answeredQuestions+"/"+questions.length,document.getElementById("question-count-display-mobile").innerHTML=answeredQuestions+"/"+questions.length,loadQuestion()}function loadQuestion(){let e=questions[currentQuestionIndex];selectedAnswers=[];const t=document.querySelector("#options");t.innerHTML="",document.querySelector("#question-text").innerHTML=e.text,document.querySelector("#type").innerHTML='<span class="font-bold text-gray-400 mt-10">'+("SINGLE"==e.type?"Select only one answer.":"Multiple answers can be selected.")+"</span>",document.querySelector("#question-header").innerHTML="Question "+(currentQuestionIndex+1)+"/10",e.options.forEach(e=>{const n=document.createElement("span");n.textContent=e,n.classList.add("flex","bg-gray-200","hover:bg-gray-300","rounded-md","px-6","py-2","my-2","qn-option"),t.appendChild(n)}),document.querySelectorAll(".qn-option").forEach(e=>{void 0!=answers[currentQuestionIndex]&&-1!=answers[currentQuestionIndex].indexOf(e.textContent)&&(e.classList.remove("bg-gray-200","hover:bg-gray-300"),e.classList.add("bg-gray-500","hover:bg-gray-600","text-white","qn-selected")),e.addEventListener("click",()=>{e.classList.contains("qn-selected")?(e.classList.remove("bg-gray-500","hover:bg-gray-600","text-white","qn-selected"),e.classList.add("bg-gray-200","hover:bg-gray-300"),removeAnswer(e,"SINGLE"==questions[currentQuestionIndex].type)):(selectAnswer(e,"SINGLE"==questions[currentQuestionIndex].type),e.classList.remove("bg-gray-200","hover:bg-gray-300"),e.classList.add("bg-gray-500","qn-selected","hover:bg-gray-600","text-white"))})})}function nextQuestion(){currentQuestionIndex<questions.length-1&&(currentQuestionIndex++,loadQuestion())}function prevQuestion(){currentQuestionIndex>0&&(currentQuestionIndex--,loadQuestion())}function selectAnswer(e,t){t&&(selectedAnswers=[],document.querySelectorAll(".qn-option").forEach(e=>{e.classList.remove("bg-gray-500","hover:bg-gray-600","text-white","qn-selected"),e.classList.add("bg-gray-200","hover:bg-gray-300")})),-1===selectedAnswers.indexOf(e.textContent)&&selectedAnswers.push(e.textContent)}function removeAnswer(e,t){t?(selectedAnswers=[],answers[currentQuestionIndex]=[],document.querySelectorAll(".qn-option").forEach(e=>{e.classList.remove("bg-gray-500","hover:bg-gray-600","text-white","qn-selected"),e.classList.add("bg-gray-200","hover:bg-gray-300")})):(selectedAnswers=selectedAnswers.filter(t=>e.textContent!=t),answers[currentQuestionIndex]=selectedAnswers)}function saveAndNext(){selectedAnswers.length>0&&(answers[currentQuestionIndex]=selectedAnswers),answeredQuestions=0,answers.forEach(e=>{e.length>0&&answeredQuestions++}),document.getElementById("question-count-display").innerHTML=answeredQuestions+"/"+questions.length,document.getElementById("question-count-display-mobile").innerHTML=answeredQuestions+"/"+questions.length,answeredQuestions==questions.length&&(endButton.classList.remove("bg-red-400","hover:bg-red-500"),endButton.classList.add("bg-green-400","hover:bg-green-500"),endButton.textContent="Submit Exam"),nextQuestion(),loadQuestionNav()}function saveAnswer(){selectedAnswers.length>0&&(answers[currentQuestionIndex]=selectedAnswers),answeredQuestions=0,answers.forEach(e=>{e.length>0&&answeredQuestions++}),document.getElementById("question-count-display").innerHTML=answeredQuestions+"/"+questions.length,document.getElementById("question-count-display-mobile").innerHTML=answeredQuestions+"/"+questions.length,answeredQuestions==questions.length&&(endButton.classList.remove("bg-red-400","hover:bg-red-500"),endButton.classList.add("bg-green-400","hover:bg-green-500"),endButton.textContent="Submit Exam"),loadQuestionNav()}function startTimer(){var e=(new Date).getTime();timer=setInterval(function(){var t=(new Date).getTime()-e,n=Math.floor(t%864e5/36e5),s=Math.floor(t%36e5/6e4),r=Math.floor(t%6e4/1e3);elapsedTime=(n<10?"0"+n:n)+":"+(s<10?"0"+s:s)+":"+(r<10?"0"+r:r),document.getElementById("time-view").innerHTML=elapsedTime,document.getElementById("time-view-mobile").innerHTML=elapsedTime},1e3)}function endExam(){for(i=0;i<questions.length;i++)if(void 0!=answers[i]){let e=answers[i].length>0&&questions[i].answers.length==answers[i].length;answers[i].forEach(t=>{-1==questions[i].answers.indexOf(t)&&(e=!1)}),e&&correctAnswers++}document.getElementById("result-body").innerHTML="Name: "+userName+"<br>Elapsed Time:"+elapsedTime+"<br>"+correctAnswers+"/"+questions.length+" Are Correct",examUi.classList.remove("flex"),examUi.classList.add("hidden"),document.getElementById("exam-info-mobile").classList.add("hidden"),resultUi.classList.remove("hidden"),resultUi.classList.add("grid"),clearInterval(timer),closeFullscreen()}function loadQuestionNav(){questionNav.innerHTML="";for(let e=1;e<=questions.length;e++){let t=document.createElement("div");t.classList.add("rounded","border-2","flex","justify-center","m-2","cursor-pointer"),t.addEventListener("click",()=>{gotoQuestion(e)}),void 0!=answers[e-1]?0!=answers[e-1].length?(t.classList.remove("border-gray-200"),t.classList.add("bg-green-400","text-white","border-green-400")):(t.classList.remove("bg-green-400","text-white","border-green-400"),t.classList.add("bg-gray-200","text-black","border-gray-200")):t.classList.add("bg-gray-200"),currentQuestionIndex==e-1&&t.classList.add("border-blue-400"),t.textContent=e,questionNav.appendChild(t)}}function gotoQuestion(e){currentQuestionIndex=e-1,loadQuestion(),loadQuestionNav()}function openFullscreen(){elem.requestFullscreen?elem.requestFullscreen():elem.webkitRequestFullscreen?elem.webkitRequestFullscreen():elem.msRequestFullscreen&&elem.msRequestFullscreen()}function closeFullscreen(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}startButton.addEventListener("click",()=>{""==(userName=document.getElementById("full-name").value)?document.getElementById("name-error").classList.remove("hidden"):(main.classList.add("hidden"),intro.classList.remove("hidden"))}),confirmButton.addEventListener("click",()=>{(examType=document.getElementById("exam-type").value)>1?(intro.classList.add("hidden"),examUi.classList.remove("hidden"),document.getElementById("user-display").innerHTML=userName,document.getElementById("user-display-mobile").innerHTML=userName,examUi.classList.add("grid"),loadExam(loadQuestions,examType-1),startTimer(),document.getElementById("exam-info-mobile").classList.remove("hidden")):document.getElementById("course-error").classList.remove("hidden"),openFullscreen()}),retryButton.addEventListener("click",()=>{currentQuestionIndex=0,resultUi.classList.remove("grid"),resultUi.classList.add("hidden"),examUi.classList.add("hidden"),intro.classList.remove("hidden")}),prevButton.addEventListener("click",()=>{prevQuestion()}),nextButton.addEventListener("click",()=>{nextQuestion()}),saveAndNextButton.addEventListener("click",()=>{saveAndNext()}),saveButton.addEventListener("click",()=>{saveAnswer()}),endButton.addEventListener("click",()=>{endExam()}),endButtonMobile.addEventListener("click",()=>{endExam()});